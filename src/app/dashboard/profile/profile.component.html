<div *ngIf="dashService.pageLoading"><app-page-loading></app-page-loading></div>
<div *ngIf="!dashService.pageLoading">
  <div class="content">
    <section class="profile container">
        <div class="row mb-1">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <mat-card class="title-card">
                  <mat-card-content>
                      <div class="d-flex">
                          <p class="title-card-head">Hello, {{ fullName }}</p> <!-- Changed from fname and lname -->
                        <p class="ms-auto title-card-head">Welcome to the Dashboard</p> <!-- Corrected spelling -->
                    </div>
                  </mat-card-content>
                </mat-card>
            </div>
            <div class="col-lg-6 mb-3">
                <mat-card class="prs-card">
                  <mat-card-content>
                      <div class="row">
                          <div class="col-lg-12 d-flex mb-3">
                          <h2 class="me-auto profile-title">Company Details</h2>
                            <button mat-icon-button class="minimized-button ms-auto" color="{{ cancelCompany ? 'accent' : 'warn' }}" aria-label="edit" (click)="toggleCompany()">
                                <mat-icon>{{ cancelCompany ? 'cancel' : 'edit' }}</mat-icon>
                            </button>
                        </div>
                      </div>
                    <div class="row">
                        <div class="col-lg-4 col-md-4 col-sm-12">
                          <div class="avatar">
                            <img src="../../../../assets/img/profile.jpg" alt="Avatar">
                          </div>
                      </div>
                      <div class="col-lg-8 col-md-8 col-sm-12">
                          <div class="row">
                              <div class="col-lg-12">
                                  <mat-form-field appearance="outline" class="form-field">
                                    <mat-label>Company Name</mat-label>
                                    <input matInput [(ngModel)]="companyName" required disabled>
                                </mat-form-field>      			
                              </div>
                              <div class="col-lg-12">
                                  <mat-form-field appearance="outline" class="form-field">
                                    <mat-label>Company Email</mat-label>
                                    <input matInput [(ngModel)]="companyEmail" disabled>
                                </mat-form-field>      			
                              </div>
                          </div>
                      </div>
                    </div>
                    <div class="row">
                          <div class="col-lg-6">
                              <mat-form-field  appearance="outline" class="form-field">
                                <mat-label>Contact No</mat-label>
                                <input matInput [(ngModel)]="contactNo" required [disabled]="!cancelCompany">
                            </mat-form-field>      			
                          </div>
                          <div class="col-lg-6">
                              <mat-form-field  appearance="outline" class="form-field">
                                <mat-label>Location</mat-label>
                                <input matInput [(ngModel)]="location" required [disabled]="!cancelCompany">
                            </mat-form-field>      			
                          </div>
                          <div class="col-lg-12">
                              <mat-form-field  appearance="outline" class="form-field">
                                <mat-label>Designation</mat-label>
                                <input matInput [(ngModel)]="designation" disabled>
                            </mat-form-field>      			
                          </div>
                          <div class="col-lg-12 text-center" *ngIf="cancelCompany">
                              <button mat-raised-button style="color: #000;background-color: #a6a6a6;" (click)="updateCompany()">Update</button>
                          </div>
                      </div>
                  </mat-card-content>
                </mat-card>
            </div>
            <div class="col-lg-6 mb-3">
                <mat-card class="mb-3 cmn-card cmn-card-left">
                  <mat-card-content>
                      <div class="row">
                          <div class="col-lg-12 d-flex mb-3">
                          <h2 class="me-auto profile-title">Personal Details</h2>
                            <button mat-icon-button class="minimized-button ms-auto" color="{{ cancelPersonal ? 'accent' : 'warn' }}" aria-label="edit" (click)="togglePersonal()">
                                <mat-icon>{{ cancelPersonal ? 'cancel' : 'edit' }}</mat-icon>
                            </button>
                        </div>
                      </div>
                      <div class="row">
                          <div class="col-lg-6">
                              <mat-form-field  appearance="outline" class="form-field">
                                <mat-label>Full Name</mat-label> <!-- Changed from First name and Last Name -->
                                <input matInput [(ngModel)]="fullName" required [disabled]="!cancelPersonal"> <!-- Changed from fname and lname -->
                            </mat-form-field>      			
                          </div>
                          <div class="col-lg-12">
                              <mat-form-field  appearance="outline" class="form-field">
                                <mat-label>Personal Email</mat-label>
                                <input matInput [(ngModel)]="personalEmail" disabled>
                            </mat-form-field>      			
                          </div>
                          <div class="col-lg-12 text-center" *ngIf="cancelPersonal">
                              <button mat-raised-button style="color: #000;background-color: #a6a6a6;" (click)="updatePersonal()">Update</button>
                          </div>
                      </div>
                  </mat-card-content>
                </mat-card>
                <mat-card class="mb-3 cmn-card cmn-card-right">
                  <mat-card-content>
                      <div class="row">
                          <div class="col-lg-12 d-flex mb-3">
                          <h2 class="me-auto profile-title">Update Password</h2>
                            <button mat-icon-button class="minimized-button ms-auto" color="{{ cancelPassword ? 'accent' : 'warn' }}" aria-label="edit" (click)="togglePassword()">
                                <mat-icon>{{ cancelPassword ? 'cancel' : 'edit' }}</mat-icon>
                            </button>
                        </div>
                      </div>
                      <div class="row">
                          <div class="col-lg-6">
                              <mat-form-field appearance="outline">
                            <mat-label>New Password</mat-label>
                            <input matInput [type]="hidePassword ? 'password' : 'text'" [(ngModel)]="password" [disabled]="!cancelPassword">
                            <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword">
                              <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                            </button>
                              </mat-form-field>			
                          </div>
                          <div class="col-lg-6">
                              <mat-form-field appearance="outline">
                            <mat-label>Confirm password</mat-label>
                            <input matInput [type]="hideConfirmPassword ? 'password' : 'text'" [(ngModel)]="CPassword" [disabled]="!cancelPassword">
                            <button mat-icon-button matSuffix (click)="hideConfirmPassword = !hideConfirmPassword" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hideConfirmPassword">
                              <mat-icon>{{hideConfirmPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                            </button>
                              </mat-form-field>     			
                          </div>
                          <div class="col-lg-12 text-center" *ngIf="cancelPassword">
                            <button mat-raised-button style="color: #000;background-color: #a6a6a6;" (click)="updatePassword()">Update</button>
                          </div>
                      </div>
                  </mat-card-content>
                </mat-card>
            </div>
        </div>
    </section>
  </div>

 </div>
